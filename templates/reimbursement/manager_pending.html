<!-- E:\CLIENT PROJECT\employee management system bos\employee_management_system\templates\reimbursement\manager_pending.html -->
{% extends "base.html" %}
{% block title %}Manager Approvals{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="mb-0">Pending for Manager</h2>
  <div>
    {# Optional: add filters/search here if your view supports it #}
  </div>
</div>

<div class="card">
  <div class="card-body p-0">
    <table class="table table-hover mb-0 align-middle">
      <thead class="table-light">
        <tr>
          <th scope="col">Request #</th>
          <th scope="col">Employee</th>
          <th scope="col">Amount</th>
          <th scope="col">Submitted</th>
          <th scope="col" style="width: 140px;">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for r in items %}
          <tr>
            <td>#{{ r.id }}</td>
            <td>{{ r.requester }}</td>
            <td>{{ r.amount }}</td>
            <td>
              {# Prefer created_at / submitted_at if present; fallback to r.created #}
              {% if r.submitted_at %}{{ r.submitted_at }}{% elif r.created_at %}{{ r.created_at }}{% else %}â€”{% endif %}
            </td>
            <td>
              <a
                href="{% url 'reimbursement:manager_review' r.id %}?return={{ request.get_full_path|urlencode }}"
                class="btn btn-sm btn-primary"
              >
                Review
              </a>
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="5" class="text-center py-4">No requests pending your approval.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% if is_paginated %}
<nav class="mt-3" aria-label="Pending reimbursements pagination">
  <ul class="pagination mb-0">
    {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
    {% else %}
      <li class="page-item disabled">
        <span class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></span>
      </li>
    {% endif %}

    {% for num in paginator.page_range %}
      {% if num == page_obj.number %}
        <li class="page-item active"><span class="page-link">{{ num }}</span></li>
      {% else %}
        <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
      {% endif %}
    {% endfor %}

    {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    {% else %}
      <li class="page-item disabled">
        <span class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></span>
      </li>
    {% endif %}
  </ul>
</nav>
{% endif %}
{% endblock %}
